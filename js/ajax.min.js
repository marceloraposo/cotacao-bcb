var templateCotacao={dias:60,init:function(){templateCotacao.CarregarDados(),templateCotacao.CarregarTabela(),google.charts.load("current",{packages:["line"]}),google.charts.setOnLoadCallback(templateCotacao.CarregarGrafico)},tbCotacao:null,linhasCotacao:[],CarregarDados:function(){var a=new Date,o=new Date;a.setDate(a.getDate()-templateCotacao.dias),templateCotacao.CarregaCotacao(o,a)},CarregaCotacao:function(a,o){$.ajax({url:"https://olinda.bcb.gov.br/olinda/servico/PTAX/versao/v1/odata/CotacaoDolarPeriodo(dataInicial='"+templateCotacao.FormatDate(o)+"',dataFinalCotacao='"+templateCotacao.FormatDate(a)+"')?format=json",type:"get",async:!1}).done(function(a){for(var o in a.value)templateCotacao.linhasCotacao.push([a.value[o].dataHoraCotacao.substring(0,10),a.value[o].cotacaoCompra,a.value[o].cotacaoVenda])}).fail(function(a,o,t){templateCotacao.linhasCotacao=[]})},CarregarGrafico:function(){var a=new google.visualization.DataTable;for(var o in a.addColumn("string","Data"),a.addColumn("number","Compra"),a.addColumn("number","Venda"),templateCotacao.linhasCotacao)a.addRow([moment(templateCotacao.linhasCotacao[o][0]).format("DD/MM"),templateCotacao.linhasCotacao[o][1],templateCotacao.linhasCotacao[o][2]]);new google.charts.Line(document.getElementById("graficoCotacao")).draw(a,google.charts.Line.convertOptions({chart:{title:"Cotação Dolar",subtitle:"Últimos 60 dias"},axes:{x:{0:{side:"top"}}}}))},CarregarTabela:function(){templateCotacao.tbCotacao=$("#tbCotacao").DataTable({data:templateCotacao.linhasCotacao,columns:[{title:"Data"},{title:"Compra"},{title:"Venda"}],order:[0,"desc"],dom:"Bfrtip",buttons:[],autoFill:!0,colReorder:!0,select:!0,keys:!0,dataSrc:"group",responsive:!0,language:{processing:"Nenhum registro encontrado",search:"Pesquisar",lengthMenu:"_MENU_ resultados por página",info:"Mostrando de _START_ até _END_ de _TOTAL_ registros",infoEmpty:"Mostrando 0 até 0 de 0 registros",infoFiltered:"(Filtrados de _MAX_ registros)",infoPostFix:"",loadingRecords:"Carregando...",zeroRecords:"Nenhum registro encontrado",emptyTable:"Nenhum registro encontrado",paginate:{first:"Primeiro",previous:"Anterior",next:"Próximo",last:"Último"},aria:{sortAscending:" Ordenar colunas de forma ascendente",sortDescending:"Ordenar colunas de forma descendente"},select:{rows:{_:"Você selecionou %d linhas",0:"Clique em uma linha para selecionar",1:"Apenas uma linha selecionada"}}}}),templateCotacao.tbCotacao.on("select",function(a,o,t,e){for(var r=0;r<e.length;r++)templateCotacao.linhasCotacao.push(templateCotacao.tbCotacao.rows(e[r]).data().toArray())}).on("deselect",function(a,o,t,e){for(var r=0;r<e.length;r++)templateCotacao.linhasCotacao.pop(templateCotacao.tbCotacao.rows(r).data().toArray())}),$("#selectAllCotacao").click(function(a){templateCotacao.tbCotacao.rows().deselect(),$(this).is(":checked")?templateCotacao.tbCotacao.rows().select():templateCotacao.tbCotacao.rows().deselect()})},FormatDate:function(a){var o=a.getDate(),t=a.getMonth();return(t+1<10?"0"+(t+1):t+1)+"-"+(o<10?"0"+o:o)+"-"+a.getFullYear()}};